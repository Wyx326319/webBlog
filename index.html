<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script>
function fn () {
  return new Promise((resolve) => {
    console.log('Promise1') // 第二步执行
    fn1()
    setTimeout(() => {
      console.log('Promise2') // 放入宏任务队列 2
      resolve() // fn状态改变
      console.log('Promise3') // 放入宏任务队列 3
    }, 0);
  })
}
async function fn1() {
  var p = Promise.resolve().then(() => {
    console.log('Promise6') // 放入微任务队列1
  })
  await p.then(() => {
    console.log('Promise7') // 放入微队列 2
  })
  console.log('end') // 第三步执行
}
console.log('script')  //第一步执行
setTimeout(() => {
  console.log('setTimeout') //宏任务队列 1
}, 0)
fn().then(() => {
  console.log('Promise4') // 放入微队列
})

    </script>
</body>
</html>